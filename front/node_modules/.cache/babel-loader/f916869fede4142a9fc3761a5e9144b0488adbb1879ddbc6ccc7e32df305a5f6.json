{"ast":null,"code":"import _objectSpread from\"C:/Users/andre/OneDrive/\\xC1rea de Trabalho/app daffi/app-DAFFI/front/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import axios from'axios';import StyledComponents from'./styled';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const{TotalWrapper,OrcamentoItem,OrcamentoList,OrcamentoWrapper,Price,Item,ItemDetails,ItemList,ErrorMessage,Header,Input,InputWrapper,Button,Container}=StyledComponents;const App=()=>{const[termo,setTermo]=useState('');const[itens,setItens]=useState([]);const[orcamento,setOrcamento]=useState([]);const[erro,setErro]=useState('');const buscarItens=async()=>{try{const res=await axios.get(\"http://localhost:3001/api/itens?termo=\".concat(termo));setItens(res.data);setErro('');}catch(err){setErro('Erro ao buscar itens');console.error('Erro ao buscar itens',err);}};const adicionarAoOrcamento=(item,quantidade)=>{if(isNaN(quantidade)||quantidade<=0){alert('Quantidade inválida!');return;}const itemOrcamento=_objectSpread(_objectSpread({},item),{},{quantidade,materialTotal:item.material*quantidade,// Calcula total de material\nmaoDeObraTotal:item.maoDeObra*quantidade,// Calcula total de mão de obra\ntotal:item.total*quantidade// Calcula total geral (material + mão de obra)\n});setOrcamento([...orcamento,itemOrcamento]);};return/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{children:\"Consulta de Pre\\xE7os - Tabela PINI\"}),/*#__PURE__*/_jsxs(InputWrapper,{children:[/*#__PURE__*/_jsx(Input,{type:\"text\",value:termo,onChange:e=>setTermo(e.target.value),placeholder:\"Pesquisar por item\"}),/*#__PURE__*/_jsx(Button,{onClick:buscarItens,children:\"Buscar\"})]}),erro&&/*#__PURE__*/_jsx(ErrorMessage,{children:erro}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Resultados da Pesquisa\"}),itens.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Nenhum item encontrado.\"}):/*#__PURE__*/_jsx(ItemList,{children:itens.map(item=>/*#__PURE__*/_jsxs(Item,{children:[/*#__PURE__*/_jsxs(ItemDetails,{children:[/*#__PURE__*/_jsx(\"div\",{children:item.nome}),/*#__PURE__*/_jsxs(Price,{children:[\"Material: R$ \",(Number(item.material)||0).toFixed(2)]}),/*#__PURE__*/_jsxs(Price,{children:[\"M\\xE3o de Obra: R$ \",(Number(item.maoDeObra)||0).toFixed(2)]}),/*#__PURE__*/_jsxs(Price,{children:[\"Total: R$ \",(Number(item.total)||0).toFixed(2)]})]}),/*#__PURE__*/_jsx(Button,{onClick:()=>{const quantidade=prompt('Digite a quantidade');if(quantidade)adicionarAoOrcamento(item,parseFloat(quantidade));},children:\"Adicionar ao Or\\xE7amento\"})]},item.id))})]}),/*#__PURE__*/_jsxs(OrcamentoWrapper,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Or\\xE7amento\"}),/*#__PURE__*/_jsx(OrcamentoList,{children:orcamento.map((item,index)=>/*#__PURE__*/_jsxs(OrcamentoItem,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[item.nome,\" - \",item.quantidade,\" x Material: R$ \",(Number(item.material)||0).toFixed(2),\" + M\\xE3o de Obra: R$ \",(Number(item.maoDeObra)||0).toFixed(2)]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"R$ \",(Number(item.total)||0).toFixed(2)]})]},index))}),/*#__PURE__*/_jsxs(TotalWrapper,{children:[\"Total: R$ \",orcamento.reduce((total,item)=>total+(Number(item.total)||0),0).toFixed(2)]})]})]});};export default App;","map":{"version":3,"names":["React","useState","axios","StyledComponents","jsx","_jsx","jsxs","_jsxs","TotalWrapper","OrcamentoItem","OrcamentoList","OrcamentoWrapper","Price","Item","ItemDetails","ItemList","ErrorMessage","Header","Input","InputWrapper","Button","Container","App","termo","setTermo","itens","setItens","orcamento","setOrcamento","erro","setErro","buscarItens","res","get","concat","data","err","console","error","adicionarAoOrcamento","item","quantidade","isNaN","alert","itemOrcamento","_objectSpread","materialTotal","material","maoDeObraTotal","maoDeObra","total","children","type","value","onChange","e","target","placeholder","onClick","length","map","nome","Number","toFixed","prompt","parseFloat","id","index","reduce"],"sources":["C:/Users/andre/OneDrive/Área de Trabalho/app daffi/app-DAFFI/front/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport StyledComponents from './styled';\r\n\r\nconst {\r\n  TotalWrapper,\r\n  OrcamentoItem,\r\n  OrcamentoList,\r\n  OrcamentoWrapper,\r\n  Price,\r\n  Item,\r\n  ItemDetails,\r\n  ItemList,\r\n  ErrorMessage,\r\n  Header,\r\n  Input,\r\n  InputWrapper,\r\n  Button,\r\n  Container\r\n} = StyledComponents;\r\n\r\nconst App: React.FC = () => {\r\n  const [termo, setTermo] = useState('');\r\n  const [itens, setItens] = useState<any[]>([]);\r\n  const [orcamento, setOrcamento] = useState<any[]>([]);\r\n  const [erro, setErro] = useState<string>('');\r\n\r\n  const buscarItens = async () => {\r\n    try {\r\n      const res = await axios.get(`http://localhost:3001/api/itens?termo=${termo}`);\r\n      setItens(res.data);\r\n      setErro('');\r\n    } catch (err) {\r\n      setErro('Erro ao buscar itens');\r\n      console.error('Erro ao buscar itens', err);\r\n    }\r\n  };\r\n\r\n  const adicionarAoOrcamento = (item: any, quantidade: number) => {\r\n    if (isNaN(quantidade) || quantidade <= 0) {\r\n      alert('Quantidade inválida!');\r\n      return;\r\n    }\r\n\r\n    const itemOrcamento = {\r\n      ...item,\r\n      quantidade,\r\n      materialTotal: item.material * quantidade,  // Calcula total de material\r\n      maoDeObraTotal: item.maoDeObra * quantidade,  // Calcula total de mão de obra\r\n      total: item.total * quantidade,  // Calcula total geral (material + mão de obra)\r\n    };\r\n\r\n    setOrcamento([...orcamento, itemOrcamento]);\r\n  };\r\n\r\n  return (\r\n    <Container>\r\n      <Header>Consulta de Preços - Tabela PINI</Header>\r\n\r\n      <InputWrapper>\r\n        <Input\r\n          type=\"text\"\r\n          value={termo}\r\n          onChange={(e) => setTermo(e.target.value)}\r\n          placeholder=\"Pesquisar por item\"\r\n        />\r\n        <Button onClick={buscarItens}>Buscar</Button>\r\n      </InputWrapper>\r\n\r\n      {erro && <ErrorMessage>{erro}</ErrorMessage>}\r\n\r\n      <div>\r\n        <h2>Resultados da Pesquisa</h2>\r\n        {itens.length === 0 ? (\r\n          <p>Nenhum item encontrado.</p>\r\n        ) : (\r\n          <ItemList>\r\n            {itens.map((item) => (\r\n              <Item key={item.id}>\r\n                <ItemDetails>\r\n                  <div>{item.nome}</div>\r\n                  <Price>Material: R$ {(Number(item.material) || 0).toFixed(2)}</Price>\r\n                  <Price>Mão de Obra: R$ {(Number(item.maoDeObra) || 0).toFixed(2)}</Price>\r\n                  <Price>Total: R$ {(Number(item.total) || 0).toFixed(2)}</Price>\r\n                </ItemDetails>\r\n                <Button\r\n                  onClick={() => {\r\n                    const quantidade = prompt('Digite a quantidade');\r\n                    if (quantidade) adicionarAoOrcamento(item, parseFloat(quantidade));\r\n                  }}\r\n                >\r\n                  Adicionar ao Orçamento\r\n                </Button>\r\n              </Item>\r\n            ))}\r\n          </ItemList>\r\n        )}\r\n      </div>\r\n\r\n      <OrcamentoWrapper>\r\n        <h2>Orçamento</h2>\r\n        <OrcamentoList>\r\n          {orcamento.map((item, index) => (\r\n            <OrcamentoItem key={index}>\r\n              <div>{item.nome} - {item.quantidade} x Material: R$ {(Number(item.material) || 0).toFixed(2)} + Mão de Obra: R$ {(Number(item.maoDeObra) || 0).toFixed(2)}</div>\r\n              <div>R$ {(Number(item.total) || 0).toFixed(2)}</div>\r\n            </OrcamentoItem>\r\n          ))}\r\n        </OrcamentoList>\r\n        <TotalWrapper>\r\n          Total: R$ {orcamento.reduce((total, item) => total + (Number(item.total) || 0), 0).toFixed(2)}\r\n        </TotalWrapper>\r\n      </OrcamentoWrapper>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}